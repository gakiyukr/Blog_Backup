<!-- TOC -->

- 1. 准备工作
    - 1.1. 服务端搭建
        - 1.1.1. 下载程序
        - 1.1.2. 编译程序
    - 1.2. 管理服务器
    - 1.3. 连接使用
    - 1.4. 后记

<!-- /TOC -->
**本文虽说标题有一个V##，但是本文并不能带你看Google。**

利用虚拟局域网，组建一个局域网环境，可以使某些仅支持**本地联机**的游戏实现多人线上联机。

## 1. 准备工作
1. 一台服务器/VPS，国内机最佳，最好是win系统。Linux优先使用CentOS。
2. 某些情况下需要一个能看Google的环境。
3. 脑子
4. 多图警告

### 1.1. 服务端搭建

#### 1.1.1. 下载程序
前往[softether下载中心](https://www.softether-download.com/cn.aspx)，下载服务端配置文件。

![2021/08/12/c1b6e0812083010.png](https://i1.xktu.xyz/2021/08/12/c1b6e0812083010.png)

啥玩意？你不知道你自己服务器是什么CPU？ssh里运行以下命令：
先运行`sudo -i`临时获取root权限，然后运行`wget -N --no-check-certificate https://raw.githubusercontent.com/FunctionClub/ZBench/master/ZBench-CN.sh && bash ZBench-CN.sh`

![2021/08/12/c328f0812083013.png](https://i1.xktu.xyz/2021/08/12/c328f0812083013.png)
这里则是你的处理器型号。

然后cd命令进入`cd /usr/local`目录，然后输入`mkdir go`新建一个名为go的文件夹。再输入`cd go`进入go文件夹。

输入wget -N 下载中心的下载链接
![2021/08/12/3a0b10812083010.png](https://i1.xktu.xyz/2021/08/12/3a0b10812083010.png)

下载完成后，使用`tar -zxvf 文件名`解压文件。

#### 1.1.2. 编译程序
授予解压出来的文件夹777权限：`chmod 777 -R vpnserver`。
进入文件夹 `cd vpnserver`后，执行make命令编译。

编译过程如果报错gcc: Command not found，那就先安装gcc：
Ubuntu命令：apt install gcc automake autoconf libtool make
CentOS命令：yum -y install gcc automake autoconf libtool make

出现下图提示，则输入1回车即可。一般来说需要三次。
![2021/08/12/810610812083014.png](https://i1.xktu.xyz/2021/08/12/810610812083014.png)

编译成功则执行 `./vpnserver start`启动服务。
![2021/08/12/22c0b0812083757.png](https://i1.xktu.xyz/2021/08/12/22c0b0812083757.png)

### 1.2. 管理服务器
![2021/08/12/44f990812083010.png](https://i1.xktu.xyz/2021/08/12/44f990812083010.png)
安装时选择：SoftEther VPN Server 管理工具（仅限管理工具），无脑下一步即可。
![2021/08/12/de5360812083757.png](https://i1.xktu.xyz/2021/08/12/de5360812083757.png)

启动管理工具，按照下图配置：
![2021/08/12/04a250812083757.png](https://i1.xktu.xyz/2021/08/12/04a250812083757.png)
![2021/08/12/8dd090812083800.png](https://i1.xktu.xyz/2021/08/12/8dd090812083800.png)
![2021/08/12/6c4f90812084111.png](https://i1.xktu.xyz/2021/08/12/6c4f90812084111.png)
这里会要求你设置管理员密码，自己设置好即可 **（无法找回！！！）**
![2021/08/12/62d6a0812084111.png](https://i1.xktu.xyz/2021/08/12/62d6a0812084111.png)
这一步会提示初始化，确认即可。然后提示设置HUB名称，自己填写。
![2021/08/12/b9bb00812085224.png](https://i1.xktu.xyz/2021/08/12/b9bb00812085224.png)
这里直接退出。
![2021/08/12/56ff30812085224.png](https://i1.xktu.xyz/2021/08/12/56ff30812085224.png)
这里写8个数字即可。
![2021/08/12/56b3c0812085224.png](https://i1.xktu.xyz/2021/08/12/56b3c0812085224.png)
VPN Azure要禁用。
![2021/08/12/a04b40812085227.png](https://i1.xktu.xyz/2021/08/12/a04b40812085227.png)
接下来就是创建用户。如图自己添加即可。
![2021/08/12/5bb6c0812085228.png](https://i1.xktu.xyz/2021/08/12/5bb6c0812085228.png)
添加完成后关闭所有窗口到主界面。点击MS-SSTP，取消全部勾选。
![2021/08/12/4e8ec0812090107.png](https://i1.xktu.xyz/2021/08/12/4e8ec0812090107.png)
![2021/08/12/69b620812090107.png](https://i1.xktu.xyz/2021/08/12/69b620812090107.png)
然后选择“管理虚拟HUB” ————“虚拟NAT和虚拟DHCP服务器”
![2021/08/12/7e5f60812090107.png](https://i1.xktu.xyz/2021/08/12/7e5f60812090107.png)
![2021/08/12/958980812090110.png](https://i1.xktu.xyz/2021/08/12/958980812090110.png)
![2021/08/12/ca9160812090231.png](https://i1.xktu.xyz/2021/08/12/ca9160812090231.png)
![2021/08/12/027dc0812090231.png](https://i1.xktu.xyz/2021/08/12/027dc0812090231.png)
![2021/08/12/b483a0812090231.png](https://i1.xktu.xyz/2021/08/12/b483a0812090231.png)
![2021/08/12/104240812090233.png](https://i1.xktu.xyz/2021/08/12/104240812090233.png)
框选出来的部分，全部为空。
至此，服务器配置完成。

### 1.3. 连接使用
还是回到我们的下载中心，这次需要的软件如图所示。
![2021/08/12/de0b00812092320.png](https://i1.xktu.xyz/2021/08/12/de0b00812092320.png)
安装选择第一个。
![2021/08/12/5f5bb0812092320.png](https://i1.xktu.xyz/2021/08/12/5f5bb0812092320.png)
启动软件后，选择添加新的VPN链接。
![2021/08/12/554840812092320.png](https://i1.xktu.xyz/2021/08/12/554840812092320.png)
![2021/08/12/2b9ea0812092323.png](https://i1.xktu.xyz/2021/08/12/2b9ea0812092323.png)
![2021/08/12/7f9810812093526.png](https://i1.xktu.xyz/2021/08/12/7f9810812093526.png)
根据你自己当时设置的填写。
![2021/08/12/6c1110812093527.png](https://i1.xktu.xyz/2021/08/12/6c1110812093527.png)
连接成功则大功告成。
![2021/08/12/1b2b00812093527.png](https://i1.xktu.xyz/2021/08/12/1b2b00812093527.png)

### 1.4. 后记
注意：不要**同时开启SecureNAT和Bridge**，否则会造成package loop，进而导致100% cpu usage。（感谢苍崎深雪同学的热心提醒）

这个程序说实话挺好用，改一下设置还能成为某些看Google的东西，但是部署是真的麻烦，如果你有win机子就趁早别折腾Linux部署了，win机子运行exe直接就能用，省去了一大堆麻烦。
如果你的目的是科学**，那我建议你趁早别折腾这玩意。搞个一键脚本不香？

大部分使用**局域网联机的游戏**都可以使用本程序，我只测试过彩虹6号的本地联机，具体其他游戏我没试过，不要问我能不能玩。